"use strict";function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){_defineProperty(t,e,r[e])})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var template=require("lodash.template"),path=require("path"),fs=require("fs"),config=require("./src/config"),jsdom=require("jsdom"),JSDOM=jsdom.JSDOM,engine=function(e,t,n){var o,c,i=t.barba,a=t.data;fs.readFile(e,function(e,t){if(e)return n(e);var r;(o=t.toString(),c=new JSDOM(o).window.document,a)&&(o=template(c.querySelector("[render]").outerHTML,{interpolate:/\%\=(.+?)\%/g})(a),r=new JSDOM(o).window.document.documentElement,c.querySelector("[render]").replaceWith(r),o=c.documentElement.outerHTML);return i&&(c=c.querySelector('[data-barba="container"]'),o=c.outerHTML),n(null,o)})},length=config.projects.length;config.projects.forEach(function(e,r){var t=r-1<0?length-1:r-1,n=length-1<r+1?0:r+1;engine(path.join(__dirname,"public")+"/project.html",{data:_objectSpread({nextNum:n,prevNum:t,next:config.projects[n],prev:config.projects[t]},e)},function(e,t){fs.writeFile("public/project-".concat(r,".html"),t,function(e){if(e)throw e;console.log("Project ".concat(r,": The file has been saved!"))})})}),module.exports.engine=engine;