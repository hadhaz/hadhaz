"use strict";function _objectSpread(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(e){_defineProperty(r,e,t[e])})}return r}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var template=require("lodash.template"),path=require("path"),fs=require("fs"),config=require("./config"),jsdom=require("jsdom"),JSDOM=jsdom.JSDOM,engine=function(e,r,n){var o,c,i=r.barba,l=r.data;fs.readFile(e,function(e,r){if(e)return n(e);var t;(o=r.toString(),c=new JSDOM(o).window.document,l)&&(o=template(c.querySelector("[render]").outerHTML,{interpolate:/\%\=(.+?)\%/g})(l),t=new JSDOM(o).window.document.documentElement,c.querySelector("[render]").replaceWith(t),o=c.documentElement.outerHTML);return i&&(c=c.querySelector('[data-barba="container"]'),o=c.outerHTML),n(null,o)})},length=config.projects.length;config.projects.forEach(function(t,e){var r=e-1<0?length-1:e-1,n=length-1<e+1?0:e+1;engine(path.join(__dirname,"public")+"/project.html",{data:_objectSpread({nextUrl:config.projects[n].url,prevUrl:config.projects[r].url,next:config.projects[n],prev:config.projects[r]},t)},function(e,r){fs.writeFile("public/project-".concat(t.url,".html"),r,function(e){if(e)throw e;console.log("Project ".concat(t.url,": The file has been saved!"))})})}),module.exports.engine=engine;