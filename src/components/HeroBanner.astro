---
import Icon from "astro-icon";
import Anchor from "./Anchor.astro";
import Image from "./Image.astro";
---

<header class="content" role="banner" nav-section perspective-group>
  <div class="container">
    <div class="layout">
      <div class="z-10" perspective="header">
        <h1 id="index">
          Hello, Iâ€™m <strong class="text-primary">Okiki.</strong>
        </h1>
        <h2>Student - Developer - Innovator</h2>
      </div>
      <Image
        src="cloudinary/e_art:audrey/okikio/okiki-ojo"
        alt="A black and white profile photo of Okiki Ojo, smiling, looking straight forward, behind a brick wall backdrop. He is wearing glasses, a black shirt and jacket, and wireless headphones which are hanging on his neck."
        width="450"
        height="350"
        data-nosnippet
        loading="eager"
        figureAttrs={{
          perspective: "image",
        }}
      />
    </div>

    <div class="social-links">
      <div class="social-layout" perspective="social-links">
        {() => {
          let links = {
            LinkedIn: ["In", "https://www.linkedin.com/in/okikio"],
            Twitter: ["Tw", "https://twitter.com/okikio_dev"],
            Github: ["Git", "https://github.com/okikio"],
            Email: ["@", "mailto:hey@okikio.dev"],
          };

          return Object.keys(links).map((name) => {
            let [shortName, href] = links[name];
            return (
              <Anchor
                class="px-4 py-2 focus-visible:bg-primary/20 hover:text-primary"
                href={href}
              >
                <span class="full">{name}</span>
                <span class="short">{shortName}</span>
              </Anchor>
            );
          });
        }}
      </div>
    </div>

    <!-- perspective="scroll-down" -->
    <div id="scroll-down">
      <Anchor href="/#content" aria-label="Scroll down button">
        <strong class="text">Scroll</strong>
        <div class="icon-container">
          <Icon name="fluent:chevron-down-24-filled" />
        </div>
      </Anchor>
    </div>
  </div>
</header>

<style lang="scss">
  header {
    @apply py-0 mx-auto w-full relative overflow-hidden;
    @apply text-xl max-w-full;

    & > .container {
      @apply max-w-[85ch] overflow-visible;
    }

    [perspective] {
      @apply translate-x-0 translate-y-0;
      perspective: 7rem;
    }

    .layout {
      @apply flex flex-row items-center w-full;
      @apply relative min-h-screen;

      h1 {
        @apply text-[2.8rem] leading-tight sm:text-5xl md:text-7xl lg:text-8xl font-lexend font-900 mb-5;
      }

      h2 {
        @apply text-lg sm:text-2xl font-manrope font-300;
        @apply mt-0 leading-tight;
      }

      figure {
        @apply absolute top-1/2 right-0;
        @apply -translate-y-1/2;
        @apply z-0 m-0;
        @apply w-[250px] h-[350px];
        @apply sm:w-[450px] sm:h-[350px];
      }

      :is(h1, h2) {
        @apply z-10;
      }
    }

    .social-links {
      @apply absolute top-1/2 right-0 -translate-y-1/2 z-10;
      @apply lt-sm:invisible lt-sm:pointer-events-none;

      .social-layout {
        @apply flex flex-col justify-center items-end;

        a {
          @apply flex items-center text-base;

          .full {
            @apply hidden;
          }

          .short {
            @apply block;
          }

          &:hover {
            .full {
              @apply block;
            }

            .short {
              @apply hidden;
            }
          }
        }
      }
    }

    #scroll-down {
      @apply absolute left-0 bottom-0 py-5 w-full;
      @apply flex justify-center;
      @apply text-center;

      :global(a) {
        @apply text-inherit no-underline hover:no-underline p-2;
      }

      .text {
        @apply py-3 block uppercase text-sm font-lexend;
        text-decoration: 2px underline theme("colors.primary");
        text-underline-offset: 0.2rem;
      }

      &:hover {
        .text {
          @apply text-primary;
          text-decoration-color: white;
          text-decoration-style: wavy;
        }

        .icon-container {
          outline: 4px dashed #ffff006b;
        }
      }

      .icon-container {
        @apply bg-primary text-black relative;
        @apply p-4 inline-block rounded-full;

        &::after {
          content: "";
          transform-origin: center center;
          transform: translate(-50%, -50%) scale(0.85);
          opacity: 1;

          @apply absolute top-1/2 left-1/2;
          @apply w-16 h-16 rounded-full;
          @apply border-[3px] border-primary;
          @apply z-10;

          animation: scale 1.5s ease-out 0.5s infinite both;
        }

        :global(svg) {
          @apply w-6 h-6;
        }

        :global(path) {
          @apply transition-colors duration-200 ease-in-out;
        }
      }
    }
  }

  @keyframes scale {
    from {
      transform: translate(-50%, -50%) scale(0.85);
      opacity: 1;
    }
    80%,
    100% {
      transform: translate(-50%, -50%) scale(1.3);
      opacity: 0;
    }
  }
</style>
