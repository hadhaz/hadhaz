---
import { Icon } from "astro-icon";
import Anchor from "./Anchor.astro";
---
<nav>
  <div class="backdrop"></div>
  <div class="container items">
    <div class="logo">
      <Anchor
        href="/"
        aria-label="The logo for Okiki Ojo, it's used on all social media site to identify and represent Okiki"
        title="Logo"
      >
        <Icon name="logo" />
      </Anchor>
    </div>
    <div class="flex-grow"></div>
    <div class="menu">
      <Anchor href="#about" class="item">About</Anchor>
      <Anchor href="#projects" class="item">Projects</Anchor>
      <Anchor href="#contact" class="item">Contact</Anchor>
      <div class="seperator"></div>
      <Anchor href="https://blog.okikio.dev" class="item">Blog</Anchor>
    </div>

    <button type="button" class="toggle">
      <span class="text">Menu</span>
      <span class="dot"></span>
    </button>
  </div>
</nav>

<style lang="scss">
  nav {
    @apply fixed top-0 left-0 w-full h-16;
    @apply z-50;

    .backdrop {
      @apply transition-all duration-500;
      @apply absolute top-0 left-0 w-full h-full;
      @apply bg-black;

      @supports (backdrop-filter: blur(10px)) {
        @apply bg-opacity-50 backdrop-blur-md;
      }
    }

    &.open .backdrop {
      @apply lt-sm:h-32;
    }
  }

  .container {
    @apply flex items-center px-5;
    @apply w-full h-full max-w-screen-xl;
  }

  .logo {
    @apply z-10;

    a {
      @apply transition-all duration-200 ease-in-out;
      @apply px-3 py-3 border border-transparent rounded-lg;
      @apply hover:text-primary hover:bg-primary/20;
      @apply block;
    }
  }

  .logo :global(svg) {
    @apply min-w-[theme("spacing.6")] w-6 h-6;
  }

  .items-horiz {
    @apply relative;
    @apply flex flex-row justify-end;
    @apply gap-1 sm:gap-2 items-center w-full;
  }

  .items {
    @apply relative;
    @apply flex flex-row justify-end;
    @apply gap-1 sm:gap-2 items-center w-full; 

    .menu {
      @apply transition-all duration-500;
      @apply flex flex-row overflow-auto;
      @apply gap-1 sm:gap-2 items-center xsm:justify-center;
      @apply lt-sm:absolute lt-sm:top-16 lt-sm:left-0 lt-sm:w-full;
      @apply lt-sm:h-16;
    }

    .item,
    .toggle {
      @apply transition-all duration-200 ease-in-out;
      @apply uppercase text-sm tracking-wide font-500 font-lexend;
      @apply px-3 py-2 sm:px-5 sm:py-3 border border-transparent rounded-lg;
      @apply no-underline;

      &.active,
      &:active,
      &:focus,
      &:hover {
        @apply text-primary bg-primary/20;
        text-decoration: 2px solid underline;
        text-underline-offset: 0.2rem;
        text-decoration-style: wavy;
      }
    }

    .toggle {
      @apply text-primary;
      @apply flex items-center gap-2;
      @apply sm:hidden;

      .text,
      .dot {
        @apply transition-transform duration-500;
      }

      .text {
        @apply translate-x-1.5;
      }

      .dot {
        @apply w-3 h-3 rounded-full;
        @apply block scale-[0.8] translate-x-1.5;
        @apply bg-current;
      }

      &:hover {
        .text {
          @apply translate-x-0;
        }
        
        .dot {
          @apply scale-[1.25] translate-x-0;
        }
      }
    }

    .seperator {
      @apply border-l-2 border-primary/30 border-solid;
      @apply h-[1.25em];
    }
  }

  @screen lt-sm {
    .menu {
      @apply -translate-y-full opacity-0 pointer-events-none invisible;
      /* @apply bg-gradient-to-b from-transparent to-black/10; */
    }

    nav.open {
      .menu {
        @apply translate-y-0 opacity-100 pointer-events-auto visible;
      }
    }
  }
</style>